<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="google-site-verification" content="pT712daFZrRdXqnpc2v-NJlRu_tMH6WZiXUHYbSz4aQ" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UltraIMG - Pro Compressor</title>
    <!-- Google Fonts for Premium Look -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Poppins', sans-serif; }
        
        body {
            background: linear-gradient(45deg, #FC466B, #3F5EFB);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px;
        }

        /* Glassmorphism Card (Sheeshe jaisa effect) */
        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            width: 100%;
            max-width: 420px;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            border: 1px solid rgba(255, 255, 255, 0.18);
            text-align: center;
        }

        .badge {
            background: #ff4757;
            color: white;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: bold;
        }

        h2 { color: #333; margin: 10px 0 5px; font-weight: 600; }
        p.sub-text { color: #666; font-size: 13px; margin-bottom: 20px; }

        /* Upload Area */
        .upload-zone {
            border: 2px dashed #3F5EFB;
            border-radius: 15px;
            padding: 25px;
            background: #f0f4ff;
            cursor: pointer;
            transition: 0.3s;
            position: relative;
            overflow: hidden;
        }
        .upload-zone:active { transform: scale(0.98); background: #e0e7ff; }
        .icon { font-size: 30px; margin-bottom: 8px; }
        
        #fileInput { display: none; }

        /* Controls */
        .controls { margin-top: 20px; text-align: left; }
        .label-row { display: flex; justify-content: space-between; font-size: 12px; font-weight: 600; color: #555; margin-bottom: 5px; }
        
        input[type=range] {
            width: 100%;
            height: 6px;
            background: #ddd;
            border-radius: 5px;
            appearance: none;
            outline: none;
        }
        input[type=range]::-webkit-slider-thumb {
            appearance: none;
            width: 18px;
            height: 18px;
            background: #3F5EFB;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        /* Mode Selector */
        .mode-selector {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        .mode-btn {
            flex: 1;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: white;
            font-size: 12px;
            cursor: pointer;
            transition: 0.2s;
        }
        .mode-btn.active {
            background: #3F5EFB;
            color: white;
            border-color: #3F5EFB;
        }

        /* Action Buttons */
        .btn-main {
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(to right, #3F5EFB, #FC466B);
            color: white;
            font-size: 16px;
            font-weight: 600;
            margin-top: 20px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(63, 94, 251, 0.4);
            transition: 0.3s;
        }
        .btn-main:active { transform: scale(0.98); }

        /* Result Area */
        #resultArea { display: none; margin-top: 25px; border-top: 1px solid #eee; padding-top: 20px; }
        
        .compare-box {
            display: flex;
            justify-content: space-between;
            background: #f8f9fa;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 15px;
            font-size: 13px;
        }
        .size-old { color: #ff4757; text-decoration: line-through; }
        .size-new { color: #2ed573; font-weight: bold; }

        img#previewImg {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 10px;
            border: 2px solid white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .download-btn {
            display: block;
            background: #2ed573;
            color: white;
            text-decoration: none;
            padding: 12px;
            border-radius: 10px;
            font-weight: 600;
            margin-top: 10px;
            box-shadow: 0 4px 10px rgba(46, 213, 115, 0.3);
        }

        /* Loading Spinner */
        .spinner {
            display: none;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
            margin: auto;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

    </style>
</head>
<body>

<div class="glass-card">
    <span class="badge">v3.0 Pro</span>
    <h2>UltraIMG</h2>
    <p class="sub-text">Compress 5MB to 5KB Instantly</p>

    <!-- Upload Area -->
    <div class="upload-zone" onclick="document.getElementById('fileInput').click()">
        <div class="icon">üìÅ</div>
        <div id="fileName">Tap to Upload Photo</div>
        <input type="file" id="fileInput" accept="image/*">
    </div>

    <div class="controls">
        <!-- Mode Buttons -->
        <div class="label-row"><span>Select Mode:</span></div>
        <div class="mode-selector">
            <button class="mode-btn" onclick="setMode('normal')">Normal</button>
            <button class="mode-btn active" onclick="setMode('extreme')">Extreme (5KB)</button>
        </div>

        <br>

        <!-- Slider -->
        <div class="label-row">
            <span>Quality Level</span>
            <span id="qualityText">10%</span>
        </div>
        <input type="range" id="qualityRange" min="0.01" max="1" step="0.01" value="0.1">
    </div>

    <!-- Compress Button -->
    <button class="btn-main" onclick="processImage()">
        <span id="btnText">Compress Now</span>
        <div class="spinner" id="loader"></div>
    </button>

    <!-- Result Area -->
    <div id="resultArea">
        <div class="compare-box">
            <div>Original: <br><span class="size-old" id="oldSize">0 MB</span></div>
            <div><img id="previewImg" src=""></div>
            <div>New Size: <br><span class="size-new" id="newSize">0 KB</span></div>
        </div>
        <a id="dlBtn" class="download-btn" download="compressed.jpg">Download Image ‚¨áÔ∏è</a>
    </div>
</div>

<script>
    let currentFile = null;
    const qualityRange = document.getElementById('qualityRange');
    const qualityText = document.getElementById('qualityText');
    const modeBtns = document.querySelectorAll('.mode-btn');

    // Default Extreme Mode Settings
    qualityRange.value = 0.1;
    let maxDim = 600; // Limits width/height to 600px for small size

    // Slider Text Update
    qualityRange.addEventListener('input', function() {
        let percent = Math.round(this.value * 100);
        qualityText.innerText = percent + "%";
    });

    // File Select Display
    document.getElementById('fileInput').addEventListener('change', function(e) {
        if(e.target.files[0]){
            currentFile = e.target.files[0];
            document.getElementById('fileName').innerText = "Selected: " + currentFile.name;
            // Show original size
            document.getElementById('oldSize').innerText = formatBytes(currentFile.size);
            // Hide previous results
            document.getElementById('resultArea').style.display = 'none';
        }
    });

    // Mode Logic
    function setMode(mode) {
        modeBtns.forEach(btn => btn.classList.remove('active'));
        if(mode === 'normal') {
            modeBtns[0].classList.add('active');
            qualityRange.value = 0.6;
            qualityText.innerText = "60%";
            maxDim = 1200; // Better quality
        } else {
            modeBtns[1].classList.add('active'); // Extreme
            qualityRange.value = 0.1;
            qualityText.innerText = "10%";
            maxDim = 600; // Small size focus
        }
    }

    // Main Process Logic
    function processImage() {
        if (!currentFile) {
            alert("Please select a photo first!");
            return;
        }

        // UI Loading State
        const btnText = document.getElementById('btnText');
        const loader = document.getElementById('loader');
        btnText.style.display = 'none';
        loader.style.display = 'block';

        const reader = new FileReader();
        reader.readAsDataURL(currentFile);

        reader.onload = function(event) {
            const img = new Image();
            img.src = event.target.result;

            img.onload = function() {
                const canvas = document.createElement('canvas');
                let width = img.width;
                let height = img.height;

                // Resize Logic (Crucial for 5KB)
                if (width > height) {
                    if (width > maxDim) {
                        height *= maxDim / width;
                        width = maxDim;
                    }
                } else {
                    if (height > maxDim) {
                        width *= maxDim / height;
                        height = maxDim;
                    }
                }

                canvas.width = width;
                canvas.height = height;
                const ctx = canvas.getContext('2d');
                ctx.drawImage(img, 0, 0, width, height);

                // Compression
                let quality = parseFloat(qualityRange.value);
                const dataUrl = canvas.toDataURL('image/jpeg', quality);

                // Show Results
                document.getElementById('previewImg').src = dataUrl;
                document.getElementById('dlBtn').href = dataUrl;
                
                // Calculate New Size
                const head = 'data:image/jpeg;base64,';
                const sizeInBytes = Math.round((dataUrl.length - head.length) * 3 / 4);
                document.getElementById('newSize').innerText = formatBytes(sizeInBytes);

                document.getElementById('resultArea').style.display = 'block';

                // Reset Button
                btnText.style.display = 'block';
                loader.style.display = 'none';
            }
        }
    }

    function formatBytes(bytes, decimals = 2) {
        if (bytes === 0) return '0 Bytes';
        const k = 1024;
        const dm = decimals < 0 ? 0 : decimals;
        const sizes = ['Bytes', 'KB', 'MB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];
    }
</script>

</body>
  </html>
